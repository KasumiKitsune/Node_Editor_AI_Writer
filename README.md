# AI 小说情节节点编辑器

这是一个基于节点的Web应用程序，旨在帮助用户构思、组织和创作故事。用户可以通过可视化的方式组合不同的故事元素，并利用 AI 来生成故事大纲和正文。


## 主要功能

- **可视化节点编辑**: 通过拖放和连接不同的节点（如情节、人物、设定、风格等）来构建故事结构。
- **丰富的元素库**: 内置了涵盖多种类别的情节、写作风格和故事结构（开头/结尾）库，供用户选择和组合。
- **自定义元素**: 支持创建自定义的情节和风格节点，以满足独特的故事需求。
- **AI 驱动的创作**:
    - **生成大纲**: 根据画布上的节点和连接，AI可以生成一份结构化的故事大纲。
    - **生成故事**: 在大纲的基础上，AI可以创作出完整的故事章节或短篇故事。
    - **文本解析**: 导入已有文本，AI可以自动分析并将其分解为相关的节点（人物、情节、环境等）。
    - **设定扩展**: 基于一个核心设定，AI可以自动生成相关的角色、情节线索和环境，帮助进行世界观构建。
- **项目管理**:
    - **导入/导出**: 支持将画布上的节点和连接导出为 JSON 文件，也支持从文件中导入，方便保存和分享项目。
    - **多语言支持**: 可选择多种语言（如中文、英文等）进行内容生成。
    - **主题切换**: 提供浅色和深色两种界面主题。

## 如何使用

1.  **添加节点**: 从左侧的“节点库”中选择需要的元素（如人物、情节），点击对应的按钮将其添加到画布上。
2.  **编辑节点**: 点击节点上的文本区域，可以修改标题、添加描述或填写自定义需求。
3.  **连接节点**:
    - **流程连接**: 从一个节点的右侧**圆形**手柄拖动到另一个节点的左侧，以创建故事流程。
    - **风格连接**: 将“风格”节点的右侧**方形**手柄连接到“情节”或“设定”节点上，以应用特定风格。
4.  **移动与缩放**:
    - **移动节点**: 按住并拖动节点的头部。
    - **平移画布**: 按住`空格键`并拖动鼠标。
    - **缩放画布**: 使用鼠标滚轮。
5.  **使用 AI**:
    - 搭建好故事结构后，点击右下角的“生成大纲”按钮。
    - 在大纲预览窗口中，点击“开始创作”以生成完整故事。
    - 使用“作品”和“设定”节点中的 AI 功能来辅助创作。
6.  **管理资产**: 生成的大纲和故事会自动存入“资产库”，可以随时预览或下载。

## 技术栈

-   **前端**: React, TypeScript
-   **样式**: Tailwind CSS
-   **AI 服务**: Google Gemini API (`@google/genai`)